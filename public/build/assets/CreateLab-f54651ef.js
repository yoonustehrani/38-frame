import{a as n,j as t,r as p,F as v,_ as h}from"./client-abbe1494.js";import{B as $,a as _}from"./BreadCrumb-3e3a8b10.js";import{c as m,a,b as g,d as w,e as z,F as O}from"./index.esm-14f15176.js";import{f as S,F as j,t as I,a as T}from"./formContext-a684c324.js";import{A as y}from"./ArrowIcon-202630a0.js";import{s as F}from"./api-8e2b663f.js";import{Q as N}from"./react-admin-65ff71f7.js";import{i as D}from"./Auth-85041acf.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";import"./Request-c3ee7f25.js";import"./PlusIcon-56c11ef8.js";const V="font-bold border-2 border-dashed border-transparent hover:border-x-dark-blue hover:text-x-dark-blue duration-300 text-gray-700 flex flex-row-reverse justify-center items-center gap-2 px-4 py-1 rounded-lg",R=({nextLevel:e,prevLevel:i})=>n("div",{className:"col-span-full flex justify-center gap-6",children:[i&&n("button",{onClick:i,className:V,type:"button",children:["بازگشت ",t(y,{to:"right",size:35})]}),n("button",{className:V,onClick:e,type:e?"button":"submit",children:[t(y,{to:"left",size:35}),e?"بعدی":"ارسال فرم"]})]}),r={required:"لطفا این فیلد را پاسخ دهید.",invalid_phone_numbe:"فرمت شماره تلفن معتبر نیست.",min(e){return`حداقل ${e} کاراکتر وارد کنید.`},max(e){return`حداکثر می توانید ${e} کاراکتر وارد کنید.`},length(e,i="کاراکتر"){return`باید ${e} ${i} باشد.`}},B=m({brand:a().required(r.required).min(3,r.min(3)).max(40,r.max(40)),founded_in_year:g().required(r.required).min(1300).max(1402),bio:a().optional().min(10,r.min(10)).max(300,r.max(300)),address:a().optional().min(10,r.min(10)).max(300,r.max(300)),category_id:a().required(r.required),phone_number:a().required(r.required).length(11,r.length(11,"رقم")).matches(/09[0-9]{9}/,{message:r.invalid_phone_numbe}),address_line:a().length(11,r.length(11,"رقم")),meta:m({social:m({instagram:a().optional().min(4,r.min(4)).max(60,r.max(60)),telegram_channel:a().optional().min(4,r.min(4)).max(60,r.max(60))}),workingDays:w().optional().of(m({name:a(),id:g(),hours:m({from:a(),to:a()}).optional()})),onlySms:z().default(!1)}),services:w().optional().of(m({service_id:g().required(),description:a().required().min(3).max(200),price:g().optional().min(1e3),price_note:a().optional().min(3)})),website:a().optional().matches(/[a-zA-Z0-9]{3,}\.[a-z]{2,}/,{message:"دامنه معتبر نیست"}),active:a().optional()}),s=[{lazy:()=>h(()=>import("./GeneralDataForm-ec5f8caf.js"),["assets/GeneralDataForm-ec5f8caf.js","assets/client-abbe1494.js","assets/Input-74baf0a1.js","assets/FormSection-0da77780.js","assets/formContext-a684c324.js","assets/hoist-non-react-statics.cjs-3f8ebaa8.js","assets/SelectBox-bb282e8f.js","assets/CityComboBox-56a1492f.js","assets/Request-c3ee7f25.js","assets/styled-92600658.js","assets/createSvgIcon-610a0a1c.js","assets/SwitchBase-91e0191a.js","assets/FormControl-a430915d.js","assets/Auth-85041acf.js","assets/ArrowIcon-202630a0.js","assets/api-8e2b663f.js","assets/Switch-e1493eef.js"]),title:"اطلاعات کلی لابراتوار",initialValues:{brand:"",founded_in_year:1402,category_id:"",bio:"",address:"",active:!0,accpect_policy:"yes"}},{lazy:()=>h(()=>import("./LabServicesForm-ff97f209.js"),["assets/LabServicesForm-ff97f209.js","assets/client-abbe1494.js","assets/formContext-a684c324.js","assets/hoist-non-react-statics.cjs-3f8ebaa8.js","assets/api-8e2b663f.js","assets/Request-c3ee7f25.js","assets/Input-4acd9be4.js","assets/index.esm-14f15176.js","assets/FormSection-0da77780.js","assets/TextArea-3a09a8ba.js"]),title:"خدمات لابراتوار",initialValues:{services:[]}},{lazy:()=>h(()=>import("./LabDetails-bd5bfed1.js"),["assets/LabDetails-bd5bfed1.js","assets/client-abbe1494.js","assets/formContext-a684c324.js","assets/hoist-non-react-statics.cjs-3f8ebaa8.js","assets/Input-74baf0a1.js","assets/FormSection-0da77780.js","assets/Switch-e1493eef.js","assets/styled-92600658.js","assets/SwitchBase-91e0191a.js"]),title:"اطلاعات تکمیلی",initialValues:{owner_fullname:"",website:""}},{lazy:()=>h(()=>import("./ContactInfoForm-06456a88.js"),["assets/ContactInfoForm-06456a88.js","assets/client-abbe1494.js","assets/Input-74baf0a1.js","assets/FormSection-0da77780.js","assets/formContext-a684c324.js","assets/hoist-non-react-statics.cjs-3f8ebaa8.js","assets/index.esm-14f15176.js","assets/Checkbox-235d27fe.js","assets/styled-92600658.js","assets/SwitchBase-91e0191a.js","assets/createSvgIcon-610a0a1c.js"]),title:"راه های ارتباطی",initialValues:{phone_number:"",address_line:"",meta:{social:{instagram:"",telegram_channel:""},workingDays:[],onlySms:!1}}}],H=Object.fromEntries(s.flatMap(e=>Object.entries(e.initialValues)));function M(e){return Object.keys(s[e].initialValues)}const ae=()=>{const[e,i]=p.useState(0),[x,E]=p.useState(!1),k=D();if(e>s.length)return null;const A=p.lazy(s[e].lazy),C=(l,{setSubmitting:c})=>{c(!0);const u=()=>new Promise((d,o)=>{const[b,Z]=F(l);b.then(f=>{if(c(!1),f.hasErrors()){o(f.getErrors());return}d(f.getContent()),k("/labs")})});N.promise(u,{pending:"در حال بررسی",success:"آپلود شد 👌",error:"خطایی پیش آمد 🤯"},{position:N.POSITION.TOP_LEFT})},q=e<s.length-1?()=>{i(l=>l+1)}:void 0,L=e>0?()=>{i(l=>l-1)}:void 0;function P(l,c){return M(l).filter(u=>Object.keys(c).includes(u))}return t(S.Provider,{value:x,children:n("section",{children:[t("h1",{className:"font-bold text-2xl",children:"ثبت نام به عنوان لابراتوار، تاریکخانه، تعمیرکار"}),n($,{children:[t(_,{link:"/",children:"ناحیه کاربری"}),t(_,{link:"/lab",children:"لابراتوار"}),t(_,{children:"ایجاد لابراتوار"})]}),n("section",{className:"w-full xl:w-3/4 2xl:w-3/5 border border-black/5 shadow-md rounded-lg p-6",children:[n("h2",{className:"font-semibold text-xl text-gray-800 mt-4 mb-6 svg-inherit col-span-full",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"30",height:"30",children:t("path",{d:"M19.949,5.536,16.465,2.05A6.958,6.958,0,0,0,11.515,0H7A5.006,5.006,0,0,0,2,5V19a5.006,5.006,0,0,0,5,5H17a5.006,5.006,0,0,0,5-5V10.485A6.951,6.951,0,0,0,19.949,5.536ZM18.535,6.95A4.983,4.983,0,0,1,19.316,8H15a1,1,0,0,1-1-1V2.684a5.01,5.01,0,0,1,1.051.78ZM20,19a3,3,0,0,1-3,3H7a3,3,0,0,1-3-3V5A3,3,0,0,1,7,2h4.515c.164,0,.323.032.485.047V7a3,3,0,0,0,3,3h4.953c.015.162.047.32.047.485Z"})})," ","فرم ایجاد لابراتوار در ۳۸ فریم"]}),t(j,{initialValues:H,validationSchema:B,onSubmit:C,children:({errors:l,submitForm:c,isSubmitting:u})=>n(v,{children:[t("div",{className:"w-full overflow-x-auto h-28 px-8",children:n("section",{className:"w-[200%] md:w-auto px-8",children:[t("div",{className:"bg-gray-300 h-2 rounded-full w-full mt-8",children:t("div",{style:{width:`${100/(s.length-1)*e}%`},className:"h-2 bg-zebra width-transition"})}),t("div",{className:"grid grid-rows-1 grid-flow-col place-content-between text-center mt-2 w-full",children:s.map(({title:d},o)=>{let b=x&&P(o,l).length>0;return n("div",{className:"px-3 grow text-center pt-3 relative flex justify-center",children:[t("span",{onClick:()=>i(o),className:`cursor-pointer duration-300 circleular-dot text-black ${o<=e?"bg-x-yellow":"bg-gray-400"}`,children:I(o+1)}),n("span",{onClick:()=>i(o),className:`cursor-pointer absolute w-max duration-300 text-xs ${o<=e?"text-black":"text-gray-500"}`,children:[d,b&&t("span",{className:"mx-1 h-4 w-4 inline-grid place-content-center bg-red-500 text-white rounded-full text-center",children:"!"})]})]},o)})})]})}),n(T,{onSubmit:d=>{d.preventDefault(),d.stopPropagation(),E(!0),c()},noValidate:!0,className:"grid lg:grid-cols-2 gap-8 mt-16 px-6 fadeIn",children:[t(O,{className:"mb-3 text-xl",text:s[e].title}),t(p.Suspense,{fallback:t(v,{children:"در حال لود کردن"}),children:t(A,{})}),!u&&t(R,{nextLevel:q,prevLevel:L})]})]})})]})]})})};export{ae as Component};
