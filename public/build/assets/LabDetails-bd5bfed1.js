import{r as c,a as o,j as a,F as N}from"./client-abbe1494.js";import{u as w}from"./formContext-a684c324.js";import{I as f}from"./Input-74baf0a1.js";import{S as v}from"./Switch-e1493eef.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";import"./FormSection-0da77780.js";import"./styled-92600658.js";import"./SwitchBase-91e0191a.js";const k=["شنبه","یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه"],C=k.map((r,s)=>({id:s,label:r,open:!1,hours:{from:"9:00",to:"17:00"}})),g=({onChange:r,defaultTime:s,valid:e})=>{const[t,l]=c.useState(s?Number(s.split(":")[0]):0),[i,u]=c.useState(s?Number(s.split(":")[1]):0),[m,p]=c.useState(t>11?"pm":"am"),n=c.useCallback(()=>{let d=0;return t==12||t==0?d=12:d=m==="am"?t:t-12,d>9?`${d}`:`0${d}`},[t,m]);function x(d){let{valueAsNumber:h}=d.target;switch(m){case"am":h==12?(l(12),p("pm")):l(h);break;case"pm":h==12?(l(0),p("am")):l(h+12);break}}return c.useEffect(()=>{switch(t){case 0:l(m=="am"?0:12);break;case 12:l(m=="am"?0:12);break;default:l(m=="am"?t>12?t-12:t:t<12?t+12:t);break}},[m]),c.useEffect(()=>{let d=setTimeout(()=>{r(`${t}:${i>9?i:"0"+i}`)},500);return()=>{clearTimeout(d)}},[t,i]),o("div",{className:"flex justify-center gap-4 mt-4",children:[o("div",{className:"flex flex-col text-lg",children:[a("button",{type:"button",onClick:()=>p("am"),className:`border ${m=="am"?"bg-x-yellow/30":"bg-x-yellow/10"} border-b-0 border-gray-500 text-sm rounded-t-lg h-1/2 px-2`,children:"قبل از ظهر"}),a("button",{type:"button",onClick:()=>p("pm"),className:`border ${m=="pm"?"bg-x-yellow/30":"bg-x-yellow/10"} border-gray-500 text-sm rounded-b-lg h-1/2 px-2`,children:"بعد از ظهر"})]}),o("div",{className:"flex flex-row-reverse items-center gap-2 text-3xl font-bold",children:[o("div",{className:"w-24 relative flex flex-col gap-2 items-center",children:[a("input",{type:"number",min:0,max:12,className:`w-full pr-3 form-input ${e?"bg-x-yellow/10":"bg-red-500/10 invalid"} h-20 text-center`,value:n(),onChange:x}),(t>12||t===0)&&a("span",{className:"text-xs absolute -top-2 bg-x-yellow px-1 rounded-sm",children:t})]}),a("span",{children:":"}),a("div",{className:"w-24 relative flex flex-col gap-2 items-center",children:a("input",{type:"number",min:0,max:60,className:`w-full pr-3 form-input ${e?"bg-x-yellow/10":"bg-red-500/10 invalid"} h-20 text-center`,value:i>9?`${i}`:`0${i}`,onChange:d=>u(d.target.valueAsNumber>=60?0:Math.abs(d.target.valueAsNumber))})})]})]})};function b(r,s){if(r==null||s==null)return!0;const[e,t]=r.split(":"),[l,i]=s.split(":");return Number(e)<Number(l)?!0:Number(t)<Number(i)}const E=({id:r,label:s,hours:e,open:t,toggleOpen:l,setOpeningTime:i,setClosingTime:u})=>{const m=c.useMemo(()=>e,[r]);return o("div",{className:"w-full md:min-w-[50%] md:w-fit px-3 py-4 rounded-md bg-x-yellow/10",children:[o("div",{className:"flex items-center justify-between text-sm",children:[o("h3",{className:"text-right text-lg flex items-center gap-2",children:[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[a("path",{d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z"}),a("path",{d:"M12,6a1,1,0,0,0-1,1v4.325L7.629,13.437a1,1,0,0,0,1.062,1.7l3.84-2.4A1,1,0,0,0,13,11.879V7A1,1,0,0,0,12,6Z"})]}),s]}),o("div",{children:[a("label",{className:"cursor-pointer",htmlFor:"day-switch",children:"فعال"}),a(v,{onChange:l,checked:t,id:"day-switch",size:"small",color:"warning"})]})]}),t&&o("div",{className:"flex flex-col items-center gap-6 mt-4",children:[o("div",{className:"px-4",children:[a("span",{className:"text-sm",children:"ساعت شروع را وارد کنید."}),a(g,{defaultTime:m.from,valid:b(e.from,e.to),onChange:i},r)]}),a("hr",{className:"w-4/5"}),o("div",{className:"px-4",children:[a("span",{className:"text-sm",children:"ساعت پایان را وارد کنید."}),a(g,{defaultTime:m.to,valid:b(e.from,e.to),onChange:u},r)]})]})]})},O=(r,s)=>{switch(s.type){case"TOGGLE_DAY_OPEN":return r.map(e=>e.id===s.payload?{...e,open:!e.open}:e);case"OPEN_ALL_DAYS":return r.map(e=>({...e,open:!0}));case"CLOSE_DAY":return r.map(e=>e.id===s.payload?{...e,open:!1}:e);case"SET_OPENING_HOUR":return r.map(e=>e.id===s.payload.id?{...e,hours:{...e.hours,from:s.payload.time}}:e);case"SET_CLOSING_HOUR":return r.map(e=>e.id===s.payload.id?{...e,hours:{...e.hours,to:s.payload.time}}:e);default:return r}},y={active:"border-x-yellow bg-x-yellow/90 text-gray-800 focus:ring focus:ring-x-yellow/40",inActive:"border-gray-400"},D=({initialData:r,handleChange:s})=>{const[e,t]=c.useReducer(O,r.length>0?r:C),[l,i]=c.useState(),u=n=>t({type:"TOGGLE_DAY_OPEN",payload:n}),m=c.useCallback(n=>{typeof l=="number"&&t({type:"SET_OPENING_HOUR",payload:{id:l,time:n}})},[l]),p=c.useCallback(n=>{typeof l=="number"&&t({type:"SET_CLOSING_HOUR",payload:{id:l,time:n}})},[l]);return c.useEffect(()=>{let n=setTimeout(()=>{s(e)},500);return()=>{clearTimeout(n)}},[e]),o("div",{className:"py-3",children:[o("div",{className:"flex flex-wrap text-sm md:text-base text-gray-800 gap-4",children:[a("div",{className:"flex",children:e.map(n=>a("button",{onClick:()=>{!n.open&&u(n.id),l!==n.id?i(n.id):i(void 0)},type:"button",className:`${n.open?y.active:y.inActive} duration-300 border last-of-type:border-l border-l-0 px-2 py-1 first-of-type:rounded-r-md last-of-type:rounded-l-md`,children:n.label},n.id))}),typeof l<"u"&&a(E,{setOpeningTime:m,setClosingTime:p,toggleOpen:()=>u(l),...e[l]})]}),a("div",{})]})},G=()=>{const[r,s,e]=w({name:"meta[workingDays]",defaultValue:[]}),t=c.useMemo(()=>r.value,[]);return o(N,{children:[a(f,{required:!0,type:"text",name:"owner_fullname",id:"owner_fullname",label:"نام مدیریت لابراتوار",className:"py-2 px-3 h-full"}),a(f,{type:"text",maxLength:10,name:"website",id:"website",label:"وب سایت لابراتوار",className:"ltr py-2 px-3 h-full",placeholder:"بدون http یا https"}),o("div",{className:"col-span-full",children:[a("hr",{className:"mb-6"}),a("h3",{className:"font-bold text-gray-800 text-lg",children:"روزهای کاری مجموعه"}),a(D,{initialData:t,handleChange:l=>e.setValue(l)})]})]})};export{G as default};
