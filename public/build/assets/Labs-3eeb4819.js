import{j as e,a,r as o,F as b}from"./client-58cc365f.js";import{f as k,C,L as y,u as S,a as j,b as L}from"./CityComboBox-849df22d.js";import{A as p}from"./ArrowIcon-18cff6a5.js";import{S as $}from"./Switch-c67f22bf.js";import"./Request-c3ee7f25.js";import"./styled-6f56fe61.js";import"./createSvgIcon-14455242.js";import"./SwitchBase-f8d70df7.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";import"./FormControl-2a4efbc0.js";const w=({amount:t})=>e("div",{className:"flex flex-row-reverse gap-1",children:[1,2,3,4,5].map(i=>e("span",{className:`star ${i<=t?"full":""}`},i))}),B=()=>a("div",{className:"bg-gray-100 rounded-lg overflow-hidden shadow-md shadow-black/10",children:[a("div",{className:"relative mb-8",children:[e("div",{className:"w-full h-auto aspect-video skeleton"}),e("div",{className:"w-full absolute -bottom-8 flex justify-center",children:e("div",{className:"h-20 w-20 flex justify-center items-center rounded-full overflow-hidden p-4 skeleton ring-4 ring-black/5 ring-opacity-40"})}),e("span",{className:"absolute top-2 left-3 font-bold  px-3 rounded-full skeleton w-14 h-6"})]}),a("div",{className:"py-4 px-3",children:[e("h4",{className:"text-lg text-center font-bold text-gray-900 w-32 h-5"}),e("hr",{className:"my-3"}),a("div",{className:"flex justify-between items-center",children:[e("div",{className:"text-sm text-gray-700",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"inline fill-gray-700",viewBox:"0 0 24 24",width:"20",height:"20",children:e("path",{d:"M18,6c0-3.309-2.691-6-6-6S6,2.691,6,6c0,2.968,2.166,5.439,5,5.916v11.084c0,.552,.448,1,1,1s1-.448,1-1V11.916c2.834-.477,5-2.948,5-5.916Zm-6,4c-2.206,0-4-1.794-4-4s1.794-4,4-4,4,1.794,4,4-1.794,4-4,4Z"})})}),e(w,{amount:0})]})]})]}),z=({onClick:t})=>e("div",{className:"fixed bottom-0 left-0 md:sr-only w-full bg-slate-50 flex justify-center items-center py-2",children:e("button",{onClick:t,className:"fill-gray-800",children:e(p,{to:"left",size:40,className:"rotate-90"})})}),E=({searchParams:t,setParams:i})=>{const[d,c]=o.useState([]),[s,h]=o.useState(!1),m=o.useMemo(()=>t.services,[]),g=o.useRef(null);function f(l){var r;l.target.checked&&t.services?i({services:[...t.services,l.target.value]}):i({services:(r=t.services)==null?void 0:r.filter(n=>n!==l.target.value)})}return o.useLayoutEffect(()=>{const[l,r]=k();return l.then(n=>{n.hasErrors()||c(n.getContent())}),()=>r()},[]),a("aside",{ref:g,className:`w-full h-full px-6 md:w-1/5 py-4 md:px-2 md:h-auto bg-white md:bg-transparent md:static overflow-y-auto z-50 md:z-0 md:border-l-2 border-dashed border-x-green shrink-0 flex flex-col gap-4 items-center md:items-start ${s?"fixed top-0 left-0":""}`,children:[s&&e(z,{onClick:()=>h(!1)}),a("button",{onClick:()=>h(!0),className:"w-fit flex gap-2 items-center font-bold md:hidden",children:[e("svg",{height:"30",viewBox:"0 0 24 24",width:"30",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"m14 24a1 1 0 0 1 -.6-.2l-4-3a1 1 0 0 1 -.4-.8v-5.62l-7.016-7.893a3.9 3.9 0 0 1 2.916-6.487h14.2a3.9 3.9 0 0 1 2.913 6.488l-7.013 7.892v8.62a1 1 0 0 1 -1 1zm-3-4.5 2 1.5v-7a1 1 0 0 1 .253-.664l7.268-8.177a1.9 1.9 0 0 0 -1.421-3.159h-14.2a1.9 1.9 0 0 0 -1.421 3.158l7.269 8.178a1 1 0 0 1 .252.664z"})}),"فیلترها"]}),a("div",{className:`${s?"":"hidden"} md:block`,children:[e("h5",{className:"font-bold text-gray-700 text-lg",children:"جستجو بر اساس نام"}),e("div",{className:"flex w-64 my-2",children:e("input",{type:"text",onChange:l=>i({brand:l.target.value}),value:t.brand??"",className:"form-input py-1 px-2"})}),a("p",{children:[e("label",{className:"cursor-pointer",htmlFor:"only-active",children:"فقط لابراتوارهای فعال"}),e($,{id:"only-active",checked:t.onlyActive??!1,color:"warning",onChange:l=>i({onlyActive:l.target.checked})})]})]}),a("div",{className:`${s?"":"hidden"} md:block`,children:[e("h5",{className:"font-bold text-gray-700 text-lg mb-3",children:"فیلتر بر اساس موقعیت مکانی"}),e(C,{cityId:t.city?t.city===-1?null:t.city:null,setCityId:l=>i({city:l?Number(l):-1})})]}),a("div",{className:`${s?"":"hidden"} md:block`,children:[e("h5",{className:"font-bold text-gray-700 text-lg",children:"فیلتر بر اساس دسته بندی"}),a("select",{className:"form-input w-64 py-1 px-3 mt-3",value:t.category??"",onChange:l=>i({category:l.target.value}),children:[e("option",{value:"",children:"انتخاب کنید"}),Object.entries(y).map(([l,r])=>e("option",{value:l,children:r},l))]})]}),a("div",{className:`${s?"":"hidden"} md:flex flex-col gap-4`,children:[e("h5",{className:"font-bold text-gray-700 text-lg",children:"فیلتر بر اساس خدمات"}),d.length>0&&d.map(l=>a("div",{children:[a("h6",{className:"text-gray-700",children:["- ",l.label]}),e("div",{className:"flex flex-col gap-3 px-2 py-4",children:l.services.map(r=>a("div",{className:"flex gap-2 items-center text-sm",children:[e("input",{className:"h-4 w-4 accent-x-green",defaultChecked:m==null?void 0:m.includes(String(r.id)),onChange:f,value:r.id,type:"checkbox",id:`service-group-${r.category_id}-${r.id}`}),e("label",{htmlFor:`service-group-${r.category_id}-${r.id}`,children:r.title})]},r.id))})]},l.id))]})]})},A=({active:t=!0})=>e("span",{className:`absolute top-2 left-3 font-bold  px-3 rounded-full ${t?"bg-emerald-300/50 text-emerald-900":"bg-red-400/50 text-red-800"}`,children:t?"فعال":"غیرفعال"}),F=({brand:t,logo:i,location:d,active:c=!0,rating:s,uri:h,category:m})=>a("a",{href:h,className:"bg-gray-100 rounded-lg overflow-hidden shadow-md shadow-black/10 flex flex-col justify-between",children:[a("div",{className:"relative mb-8",children:[e("img",{className:"w-full h-auto",src:"/images/service-darkroom.webp",alt:""}),e("div",{className:"w-full absolute -bottom-8 flex justify-center",children:e("div",{className:"h-20 w-20 flex justify-center items-center rounded-full overflow-hidden p-4 bg-black/60 ring-4 ring-x-yellow ring-opacity-40",children:e("img",{className:"h-auto w-full",src:i,alt:""})})}),e(A,{active:c})]}),a("div",{className:"py-4 px-3",children:[e("h4",{className:"text-lg text-center font-bold text-gray-900",children:t}),e("h5",{className:"mt-3 text-sm text-center font-bold text-gray-700",children:y[m]}),a("div",{children:[e("hr",{className:"my-3"}),a("div",{className:"flex justify-between items-center",children:[a("div",{className:"text-sm text-gray-700",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"inline fill-gray-700",viewBox:"0 0 24 24",width:"20",height:"20",children:e("path",{d:"M18,6c0-3.309-2.691-6-6-6S6,2.691,6,6c0,2.968,2.166,5.439,5,5.916v11.084c0,.552,.448,1,1,1s1-.448,1-1V11.916c2.834-.477,5-2.948,5-5.916Zm-6,4c-2.206,0-4-1.794-4-4s1.794-4,4-4,4,1.794,4,4-1.794,4-4,4Z"})}),d]}),e(w,{amount:s})]})]})]})]});function I({label:t}){switch(t){case"&laquo; Previous":return e(p,{to:"right",size:20});case"Next &raquo;":return e(p,{to:"left",size:20});default:return e("span",{className:"pt-1",children:t})}}const M=({labs:t,pagination:i,setPage:d})=>{if(t.length==0)return e("h6",{children:"هیچ نتیجه ای یافت نشد"});let c=i&&i.links.filter(s=>s.url!==null);return a(b,{children:[t.map(s=>e(F,{...s},s.id)),c&&c.length>1&&e("div",{className:"col-span-full flex flex-wrap justify-center gap-3 text-gray-800",children:c.map(s=>e("button",{onClick:()=>d(s.url),className:`h-8 w-8 flex items-center rounded-md justify-center ${s.active?"":"border border-black/10 hover:bg-gray-100"}`,disabled:s.active,type:"button",children:e(I,{label:s.label})},s.label))})]})},H=()=>{const[t,i,d]=S(),[c,s]=o.useState(!0),[h,m]=o.useState([]),[g,f]=o.useState(),[l,r]=j("page",1);return o.useLayoutEffect(()=>{let n=d();l&&l>1&&(n+=`page=${l}`);const[u,N]=L(`?${n}`);return!c&&s(!0),setTimeout(()=>{u.then(x=>{if(!x.hasErrors()){let v=x.getContent();m(v.data),f(v.meta),s(!1)}})},100),()=>N()},[location.search]),o.useEffect(()=>{l!=1&&r(1)},[t]),a(b,{children:[e(E,{searchParams:t,setParams:i}),e("div",{className:"md:grow grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 grid-flow-row gap-6 py-4",children:c?[...Array(8)].map((n,u)=>e(B,{},u)):e(M,{labs:h,setPage:n=>{if(!n)return;const u=/.+\?page\=(\d)/.exec(n);r(Number(u[1]))},pagination:g})})]})};export{H as default};
