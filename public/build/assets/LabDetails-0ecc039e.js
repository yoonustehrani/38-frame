import{r as u,a as i,j as t,F as v}from"./client-abbe1494.js";import{u as N}from"./formContext-a684c324.js";import{I as b}from"./Input-74baf0a1.js";import{I as w}from"./Input-4acd9be4.js";import{f as _}from"./index-81c6ef03.js";import{S as E}from"./Switch-e1493eef.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";import"./FormSection-0da77780.js";import"./index.esm-14f15176.js";import"./styled-92600658.js";import"./SwitchBase-91e0191a.js";const x=({onChange:r,defaultTime:a,valid:e})=>{const[l,d]=u.useState(a?Number(a.split(":")[0]):0),[c,o]=u.useState(a?Number(a.split(":")[1]):0),[s,p]=u.useState(l>11?"pm":"am"),f=u.useCallback(()=>{let m=0;return l==12||l==0?m=12:m=s==="am"?l:l-12,m>9?`${m}`:`0${m}`},[l,s]);function g(m){let{valueAsNumber:n}=m.target;switch(s){case"am":n==12?(d(12),p("pm")):d(n);break;case"pm":n==12?(d(0),p("am")):d(n+12);break}}return u.useEffect(()=>{switch(l){case 0:d(s=="am"?0:12);break;case 12:d(s=="am"?0:12);break;default:d(s=="am"?l>12?l-12:l:l<12?l+12:l);break}},[s]),u.useEffect(()=>{let m=setTimeout(()=>{r(`${l}:${c>9?c:"0"+c}`)},500);return()=>{clearTimeout(m)}},[l,c]),i("div",{className:"flex justify-center gap-4 mt-4",children:[i("div",{className:"flex flex-col text-lg",children:[t("button",{type:"button",onClick:()=>p("am"),className:`border ${s=="am"?"bg-x-yellow/30":"bg-x-yellow/10"} border-b-0 border-gray-500 text-sm rounded-t-lg h-1/2 px-2`,children:"قبل از ظهر"}),t("button",{type:"button",onClick:()=>p("pm"),className:`border ${s=="pm"?"bg-x-yellow/30":"bg-x-yellow/10"} border-gray-500 text-sm rounded-b-lg h-1/2 px-2`,children:"بعد از ظهر"})]}),i("div",{className:"flex flex-row-reverse items-center gap-2 text-3xl font-bold",children:[i("div",{className:"w-24 relative flex flex-col gap-2 items-center",children:[t("input",{type:"number",min:0,max:12,className:`w-full pr-3 form-input ${e?"bg-x-yellow/10":"bg-red-500/10 invalid"} h-20 text-center`,value:f(),onChange:g}),(l>12||l===0)&&t("span",{className:"text-xs absolute -top-2 bg-x-yellow px-1 rounded-sm",children:l})]}),t("span",{children:":"}),t("div",{className:"w-24 relative flex flex-col gap-2 items-center",children:t("input",{type:"number",min:0,max:60,className:`w-full pr-3 form-input ${e?"bg-x-yellow/10":"bg-red-500/10 invalid"} h-20 text-center`,value:c>9?`${c}`:`0${c}`,onChange:m=>o(m.target.valueAsNumber>=60?0:Math.abs(m.target.valueAsNumber))})})]})]})};function y(r,a){if(r==null||a==null)return!0;const[e,l]=r.split(":"),[d,c]=a.split(":");return Number(e)<Number(d)?!0:Number(l)<Number(c)}const k=({id:r,label:a,hours:e,open:l,toggleOpen:d,setOpeningTime:c,setClosingTime:o})=>{const s=u.useMemo(()=>e,[r]);return i("div",{className:"w-full md:min-w-[50%] md:w-fit px-3 py-4 rounded-md bg-x-yellow/10",children:[i("div",{className:"flex items-center justify-between text-sm",children:[i("h3",{className:"text-right text-lg flex items-center gap-2",children:[i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[t("path",{d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z"}),t("path",{d:"M12,6a1,1,0,0,0-1,1v4.325L7.629,13.437a1,1,0,0,0,1.062,1.7l3.84-2.4A1,1,0,0,0,13,11.879V7A1,1,0,0,0,12,6Z"})]}),a]}),i("div",{children:[t("label",{className:"cursor-pointer",htmlFor:"day-switch",children:"فعال"}),t(E,{onChange:d,checked:l,id:"day-switch",size:"small",color:"warning"})]})]}),l&&i("div",{className:"flex flex-col items-center gap-6 mt-4",children:[i("div",{className:"px-4",children:[t("span",{className:"text-sm",children:"ساعت شروع را وارد کنید."}),t(x,{defaultTime:s.from,valid:y(e.from,e.to),onChange:c},r)]}),t("hr",{className:"w-4/5"}),i("div",{className:"px-4",children:[t("span",{className:"text-sm",children:"ساعت پایان را وارد کنید."}),t(x,{defaultTime:s.to,valid:y(e.from,e.to),onChange:o},r)]})]})]})},A=["شنبه","یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه"],C=A.map((r,a)=>({id:a,label:r,open:!1,hours:{from:"9:00",to:"17:00"}})),D=(r,a)=>{switch(a.type){case"TOGGLE_DAY_OPEN":return r.map(e=>e.id===a.payload?{...e,open:!e.open}:e);case"OPEN_ALL_DAYS":return r.map(e=>({...e,open:!0}));case"CLOSE_DAY":return r.map(e=>e.id===a.payload?{...e,open:!1}:e);case"SET_OPENING_HOUR":return r.map(e=>e.id===a.payload.id?{...e,hours:{...e.hours,from:a.payload.time}}:e);case"SET_CLOSING_HOUR":return r.map(e=>e.id===a.payload.id?{...e,hours:{...e.hours,to:a.payload.time}}:e);default:return r}},h={active:"border-x-yellow bg-x-yellow/90 text-gray-800 focus:ring focus:ring-x-yellow/40",inActive:"border-gray-400"},O=({className:r})=>{const[a,e]=u.useReducer(D,C),[l,d,c]=N({name:"meta[workingDays]"}),[o,s]=u.useState(),p=n=>e({type:"TOGGLE_DAY_OPEN",payload:n}),f=u.useCallback(n=>{typeof o=="number"&&e({type:"SET_OPENING_HOUR",payload:{id:o,time:n}})},[o]),g=u.useCallback(n=>{typeof o=="number"&&e({type:"SET_CLOSING_HOUR",payload:{id:o,time:n}})},[o]),m=a.filter(n=>!n.open).length===0;return u.useEffect(()=>{let n=setTimeout(()=>{c.setValue(a)},500);return()=>{clearTimeout(n)}},[a]),i("div",{className:"py-3",children:[i("div",{className:"flex flex-wrap text-sm md:text-base text-gray-800 gap-4",children:[t("button",{disabled:m,onClick:()=>e({type:"OPEN_ALL_DAYS"}),type:"button",className:`border ${m?h.active:h.inActive} px-2 py-1 rounded-md`,children:"همه روز ها"}),t("div",{className:"flex",children:a.map(n=>t("button",{onClick:()=>{!n.open&&p(n.id),o!==n.id?s(n.id):s(void 0)},type:"button",className:`${n.open?h.active:h.inActive} duration-300 border last-of-type:border-l border-l-0 px-2 py-1 first-of-type:rounded-r-md last-of-type:rounded-l-md`,children:n.label},n.id))}),typeof o<"u"&&t(k,{setOpeningTime:f,setClosingTime:g,toggleOpen:()=>p(o),...a[o]})]}),t("div",{})]})},F=()=>{const[r,a]=u.useState(),[e,l,d]=N({name:"iban"}),c=s=>{let p=s.slice(0,2);return s.length>2&&(p+="-"+s.slice(2).split(/(\d{4})/).filter(f=>f.match(/[\d{1,4}]/)).join("-")),p??""},o=s=>s.trim().replace(/\-/g,"");return u.useEffect(()=>{e.value.length===24?a(_("IR"+e.value)):r&&a(void 0)},[e.value]),i(v,{children:[t(b,{required:!0,type:"text",name:"owner_fullname",id:"owner_fullname",label:"نام مدیریت لابراتوار",className:"py-2 px-3 h-full"}),t(b,{required:!0,type:"text",maxLength:10,name:"owner_national_id",id:"owner_national_id",label:"کد ملی مدیریت لابراتوار",className:"ltr py-2 px-3 h-full"}),t(b,{type:"text",maxLength:10,name:"website",id:"website",label:"وب سایت لابراتوار",className:"ltr py-2 px-3 h-full",placeholder:"اگر وب سایت دارید اینجا وارد کنید"}),i("div",{children:[i(w,{required:!0,...e.onBlur,onChange:s=>d.setValue(o(s.target.value)),value:c(e.value),maxLength:30,type:"text",name:"iban",id:"iban",label:"شماره شبا معتبر",className:"ltr py-2 pt-3 px-3 pl-9",children:[t("div",{className:"h-12 w-10 absolute left-0 top-0 flex justify-center items-center px-3",children:t("span",{className:"leading-tight pt-1",children:"IR"})}),l.error&&t("div",{className:"text-red-600 my-2 text-sm",children:l.error})]}),(r==null?void 0:r.name)&&i("div",{className:"text-gray-700 w-full flex items-end gap-3 pt-3 px-2 fadeIn",children:[t("img",{className:"h-7",src:`/images/bank-icons/${r.icon}`,alt:""}),i("span",{className:"text-sm font-bold",children:["بانک ",r.name_farsi]})]})]}),i("div",{className:"col-span-full",children:[t("hr",{className:"mb-6"}),t("h3",{className:"font-bold text-gray-800 text-lg",children:"روزهای کاری مجموعه شما"}),t(O,{})]})]})};export{F as default};
