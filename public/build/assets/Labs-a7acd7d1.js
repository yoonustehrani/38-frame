import{j as e,a,r as n,F as y}from"./client-abbe1494.js";import{f as N,a as C,C as S,L as k,u as L,b as $,c as j}from"./CityComboBox-0b399943.js";import{A as b}from"./ArrowIcon-202630a0.js";import{S as B}from"./Switch-e1493eef.js";import"./Request-86ea05f5.js";import"./styled-92600658.js";import"./createSvgIcon-610a0a1c.js";import"./SwitchBase-91e0191a.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";import"./FormControl-a430915d.js";const w=({amount:l})=>e("div",{className:"flex flex-row-reverse gap-1",children:[1,2,3,4,5].map(r=>e("span",{className:`star ${r<=l?"full":""}`},r))}),E=()=>a("div",{className:"bg-gray-100 rounded-lg overflow-hidden shadow-md shadow-black/10",children:[a("div",{className:"relative mb-8",children:[e("div",{className:"w-full h-auto aspect-video skeleton"}),e("div",{className:"w-full absolute -bottom-8 flex justify-center",children:e("div",{className:"h-20 w-20 flex justify-center items-center rounded-full overflow-hidden p-4 skeleton ring-4 ring-black/5 ring-opacity-40"})}),e("span",{className:"absolute top-2 left-3 font-bold  px-3 rounded-full skeleton w-14 h-6"})]}),a("div",{className:"py-4 px-3",children:[e("h4",{className:"text-lg text-center font-bold text-gray-900 w-32 h-5"}),e("hr",{className:"my-3"}),a("div",{className:"flex justify-between items-center",children:[e("div",{className:"text-sm text-gray-700",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"inline fill-gray-700",viewBox:"0 0 24 24",width:"20",height:"20",children:e("path",{d:"M18,6c0-3.309-2.691-6-6-6S6,2.691,6,6c0,2.968,2.166,5.439,5,5.916v11.084c0,.552,.448,1,1,1s1-.448,1-1V11.916c2.834-.477,5-2.948,5-5.916Zm-6,4c-2.206,0-4-1.794-4-4s1.794-4,4-4,4,1.794,4,4-1.794,4-4,4Z"})})}),e(w,{amount:0})]})]})]}),z=({onClick:l})=>e("div",{className:"fixed bottom-0 left-0 md:sr-only w-full bg-slate-50 flex justify-center items-center py-2",children:e("button",{onClick:l,className:"fill-gray-800",children:e(b,{to:"left",size:40,className:"rotate-90"})})}),A=({searchParams:l,setParams:r})=>{const[d,c]=n.useState([]),[i,u]=n.useState([]),[o,p]=n.useState(!1),g=n.useMemo(()=>l.services,[]),h=n.useRef(null);function x(t){var s;t.target.checked&&l.services?r({services:[...l.services,t.target.value]}):r({services:(s=l.services)==null?void 0:s.filter(f=>f!==t.target.value)})}return n.useLayoutEffect(()=>{const[t,s]=N(),[f,v]=C();return t.then(m=>{m.hasErrors()||c(m.getContent())}),f.then(m=>{m.hasErrors()||u(m.getContent())}),()=>{v(),s()}},[]),a("aside",{ref:h,className:`w-full h-full px-6 md:w-1/5 py-4 md:px-2 md:h-auto bg-white md:bg-transparent md:static overflow-y-auto z-50 md:z-0 md:border-l-2 border-dashed border-x-green shrink-0 flex flex-col gap-4 items-center md:items-start ${o?"fixed top-0 left-0":""}`,children:[o&&e(z,{onClick:()=>p(!1)}),a("button",{onClick:()=>p(!0),className:"w-fit flex gap-2 items-center font-bold md:hidden",children:[e("svg",{height:"30",viewBox:"0 0 24 24",width:"30",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"m14 24a1 1 0 0 1 -.6-.2l-4-3a1 1 0 0 1 -.4-.8v-5.62l-7.016-7.893a3.9 3.9 0 0 1 2.916-6.487h14.2a3.9 3.9 0 0 1 2.913 6.488l-7.013 7.892v8.62a1 1 0 0 1 -1 1zm-3-4.5 2 1.5v-7a1 1 0 0 1 .253-.664l7.268-8.177a1.9 1.9 0 0 0 -1.421-3.159h-14.2a1.9 1.9 0 0 0 -1.421 3.158l7.269 8.178a1 1 0 0 1 .252.664z"})}),"فیلترها"]}),a("div",{className:`${o?"":"hidden"} md:block`,children:[e("h5",{className:"font-bold text-gray-700 text-lg",children:"جستجو بر اساس نام"}),e("div",{className:"flex w-64 my-2",children:e("input",{type:"text",onChange:t=>r({brand:t.target.value}),value:l.brand??"",className:"form-input py-1 px-2"})}),a("p",{children:[e("label",{className:"cursor-pointer",htmlFor:"only-active",children:"فقط لابراتوارهای فعال"}),e(B,{id:"only-active",checked:l.onlyActive??!1,color:"warning",onChange:t=>r({onlyActive:t.target.checked})})]})]}),a("div",{className:`${o?"":"hidden"} md:block`,children:[e("h5",{className:"font-bold text-gray-700 text-lg mb-3",children:"فیلتر بر اساس موقعیت مکانی"}),e(S,{cityId:l.city?l.city===-1?null:l.city:null,setCityId:t=>r({city:t?Number(t):-1})})]}),a("div",{className:`${o?"":"hidden"} md:block`,children:[e("h5",{className:"font-bold text-gray-700 text-lg",children:"فیلتر بر اساس دسته بندی"}),a("select",{className:"form-input w-64 py-1 px-3 mt-3",value:l.category??"",onChange:t=>r({category:Number(t.target.value)}),children:[e("option",{value:"",children:"انتخاب کنید"}),i.map(t=>e("option",{value:t.id,children:t.label},t.id))]})]}),a("div",{className:`${o?"":"hidden"} md:flex flex-col gap-4`,children:[e("h5",{className:"font-bold text-gray-700 text-lg",children:"فیلتر بر اساس خدمات"}),d.length>0&&d.map(t=>a("div",{children:[a("h6",{className:"text-gray-700",children:["- ",t.label]}),e("div",{className:"flex flex-col gap-3 px-2 py-4",children:t.children.map(s=>a("div",{className:"flex gap-2 items-center text-sm",children:[e("input",{className:"h-4 w-4 accent-x-green",defaultChecked:g==null?void 0:g.includes(String(s.id)),onChange:x,value:s.id,type:"checkbox",id:`service-group-${s.parent_id}-${s.id}`}),e("label",{htmlFor:`service-group-${s.parent_id}-${s.id}`,children:s.label})]},s.id))})]},t.id))]})]})},F=({active:l=!0})=>e("span",{className:`absolute top-2 left-3 font-bold  px-3 rounded-full ${l?"bg-emerald-300/50 text-emerald-900":"bg-red-400/50 text-red-800"}`,children:l?"فعال":"غیرفعال"}),q=({brand:l,logo:r,location:d,active:c=!0,rating:i,uri:u,category:o})=>a("a",{href:u,className:"bg-gray-100 rounded-lg overflow-hidden shadow-md shadow-black/10 flex flex-col justify-between",children:[a("div",{className:"relative mb-8",children:[e("img",{className:"w-full h-auto",src:"/images/service-darkroom.webp",alt:""}),e("div",{className:"w-full absolute -bottom-8 flex justify-center",children:e("div",{className:"h-20 w-20 flex justify-center items-center rounded-full overflow-hidden p-4 bg-black/60 ring-4 ring-x-yellow ring-opacity-40",children:e("img",{className:"h-auto w-full",src:r,alt:""})})}),e(F,{active:c})]}),a("div",{className:"py-4 px-3",children:[e("h4",{className:"text-lg text-center font-bold text-gray-900",children:l}),e("h5",{className:"mt-3 text-sm text-center font-bold text-gray-700",children:k[o]}),a("div",{children:[e("hr",{className:"my-3"}),a("div",{className:"flex justify-between items-center",children:[a("div",{className:"text-sm text-gray-700",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"inline fill-gray-700",viewBox:"0 0 24 24",width:"20",height:"20",children:e("path",{d:"M18,6c0-3.309-2.691-6-6-6S6,2.691,6,6c0,2.968,2.166,5.439,5,5.916v11.084c0,.552,.448,1,1,1s1-.448,1-1V11.916c2.834-.477,5-2.948,5-5.916Zm-6,4c-2.206,0-4-1.794-4-4s1.794-4,4-4,4,1.794,4,4-1.794,4-4,4Z"})}),d]}),e(w,{amount:i})]})]})]})]});function I({label:l}){switch(l){case"&laquo; Previous":return e(b,{to:"right",size:20});case"Next &raquo;":return e(b,{to:"left",size:20});default:return e("span",{className:"pt-1",children:l})}}const G=({labs:l,pagination:r,setPage:d})=>{if(l.length==0)return e("h6",{children:"هیچ نتیجه ای یافت نشد"});let c=r&&r.links.filter(i=>i.url!==null);return a(y,{children:[l.map(i=>e(q,{...i},i.id)),c&&c.length>1&&e("div",{className:"col-span-full flex flex-wrap justify-center gap-3 text-gray-800",children:c.map(i=>e("button",{onClick:()=>d(i.url),className:`h-8 w-8 flex items-center rounded-md justify-center ${i.active?"":"border border-black/10 hover:bg-gray-100"}`,disabled:i.active,type:"button",children:e(I,{label:i.label})},i.label))})]})},K=()=>{const[l,r,d]=L(),[c,i]=n.useState(!0),[u,o]=n.useState([]),[p,g]=n.useState(),[h,x]=$("page",1);return n.useLayoutEffect(()=>{let t=d();h&&h>1&&(t+=`page=${h}`);const[s,f]=j(`?${t}`);return!c&&i(!0),setTimeout(()=>{s.then(v=>{if(!v.hasErrors()){let m=v.getContent();o(m.data),g(m.meta),i(!1)}})},100),()=>f()},[location.search]),n.useEffect(()=>{h!=1&&x(1)},[l]),a(y,{children:[e(A,{searchParams:l,setParams:r}),e("div",{className:"md:grow grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 grid-flow-row gap-6 py-4",children:c?[...Array(8)].map((t,s)=>e(E,{},s)):e(G,{labs:u,setPage:t=>{if(!t)return;const s=/.+\?page\=(\d)/.exec(t);x(Number(s[1]))},pagination:p})})]})};export{K as default};
